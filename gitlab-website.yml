workflow:
  rules:
    - if: '$CI_COMMIT_REF_NAME =~ /pr-.*-master/ || $CI_PIPELINE_SOURCE == "web" || $CI_PIPELINE_SOURCE == "api"'
      when: always
    - when: never

.website:
  tags:
    - notset-runner
  stage: build
  before_script:
    - sudo dnf install -y hunspell pandoc jq rubygems ruby-devel gcc-c++ pkg-config libxml2 libxslt libxml2-devel libxslt-devel rubygem-bundler
  script:
    - git clone https://github.com/${CI_PROJECT_PATH%%/*}/qubesos.github.io ~/qubesos.github.io
    - ~/qubesos.github.io/_utils/gitlabci.sh
